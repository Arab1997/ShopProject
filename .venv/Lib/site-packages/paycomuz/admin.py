from django.contrib import admin
from orders.models import Order
from .models import Transaction
from django.utils.html import format_html

# Register your models here.
class OrderAdmin(admin.ModelAdmin):
    list_display = ['order_id', 'full_name', 'phone', 'email', 'city', 'order_total', 'tax', 'status', 'is_ordered', 'created_at']

    def status(self, obj):
        if obj.status == 'Completed':
            color = 'green'
        elif obj.status == 'Pending':
            color = 'orange'
        else:
            color = 'red'
        return format_html('<span style="color: {};">{}</span>', color, obj.status)


@admin.register(Order)
class OrderAdmin(admin.ModelAdmin):
    list_display = ['order_id', 'full_name', 'phone', 'email', 'city', 'order_total', 'tax', 'status', 'is_ordered',
                'created_at']


class TransactionAdmin(admin.ModelAdmin):
    list_display = (
        'id', '_id', 'request_id', 'amount', 'state', 'status',
        'perform_datetime', 'cancel_datetime', 'created_datetime'
    )
    list_display_links = ('id',)
    list_filter = ('status',)
    search_fields = ['request_id', 'status', 'id', '_id']

admin.site.register(Transaction, TransactionAdmin)